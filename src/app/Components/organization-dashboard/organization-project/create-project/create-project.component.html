<mat-card class="create-announcement-card mat-elevation-z8">
  <mat-card-header>
    <mat-card-title>Create New Project</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
      <div class="form-grid">
        <!-- task Title -->
        <mat-form-field appearance="outline">
          <mat-label>Task Name</mat-label>
          <input matInput formControlName="name" required>
          <mat-error *ngIf="taskForm.get('name')?.hasError('required')">
            Task is required
          </mat-error>
        </mat-form-field>

        <!-- task Type -->
        <!-- <mat-form-field appearance="outline">
          <mat-label>Project</mat-label>
          <mat-select formControlName="ProjectId" required>
            <mat-option *ngFor="let type of Project" [value]="type.id">
              {{ type.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="taskForm.get('ProjectId')?.hasError('required')">
            Project is required
          </mat-error>
        </mat-form-field> -->


        <!-- Multi-select Dropdowns -->
        <mat-form-field appearance="outline">
          <mat-label>Stations</mat-label>
          <mat-select formControlName="employeeStationIds" multiple>
            <mat-option *ngFor="let station of stations" [value]="station.id">
              {{ station.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Departments</mat-label>
          <mat-select formControlName="departmentIds" multiple>
            <mat-option *ngFor="let dept of departments" [value]="dept.id">
              {{ dept.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Project</mat-label>
          <mat-select formControlName="projectId" multiple>
            <mat-option *ngFor="let group of Project" [value]="group.id">
              {{ group.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Description -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Details</mat-label>
          <textarea matInput formControlName="description" rows="4"></textarea>
        </mat-form-field>
      </div>

      <div class="action-buttons">
        <button mat-flat-button color="primary" type="submit" [disabled]="taskForm.invalid || isSubmitting">
          <span *ngIf="!isSubmitting">Create task</span>
          <mat-spinner *ngIf="isSubmitting" diameter="20"></mat-spinner>
        </button>
        <button mat-stroked-button type="button" (click)="onCancel()">Cancel</button>
      </div>
    </form>
  </mat-card-content>
</mat-card>